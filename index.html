<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://kit.fontawesome.com/41bcea2ae3.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="/path/to/c3.css" rel="stylesheet">
    <script src="/path/to/d3.v5.min.js" charset="utf-8"></script>
    <script src="/path/to/c3.min.js"></script>
    <link rel="stylesheet" href="estilo.css">
    <title>Inicio</title>
    
</head>
<body>
    <header> 
        <h1 >Monitorizacion de datos Aero</h1>
    
  
        <div class="container__menu">
            <div class="menu">
                <i class="fas fa-bars" id="btn_menu"></i>
                <div id="back_menu"></div>
                <nav id="nav">
                    <ul>
                        <li><a href="#" id="selected">Inicio</a></li>
                        <li><a href="../historicos">Historicos</a></li>
                    </ul>
                </nav>
            </div>
        </div>

    </header>
    <script>
        document.getElementById("btn_menu").addEventListener("click", mostrar_menu);

document.getElementById("back_menu").addEventListener("click", ocultar_menu);

nav = document.getElementById("nav");
background_menu = document.getElementById("back_menu");

function mostrar_menu(){

    nav.style.right = "0px";
    background_menu.style.display = "block";
}

function ocultar_menu(){

    nav.style.right = "-250px";
    background_menu.style.display = "none";
}


    </script>
    <div class="modoa">
<div>
  <h1 class="tama単o">Modo de operacion nuevo </h1>
    <canvas id="myChart"  width="20" height="5"></canvas>
  </div>
  <script>
    var modens = [];
    var currentHours =[];
    var labels=[];
    let myChart;

    setInterval(() => {
  console.log("Delayed for 1 second.");

     fetch('/envio')
    .then(response => response.json())
    .then(json => {
      modens.push(parseFloat(json.Modonew));
      currentHours.push(json.currentHour);
      labels.push(parseInt(json.label));     
  });
  const data = {
      labels: labels,
      datasets: [{
        label: 'Sistema nuevo',
        backgroundColor: 'rgb(255, 99, 132)',
        borderColor: 'rgb(255, 99, 132)',
        data: [modens]
            }]
          };
          
    const config = {
      type: 'line',
      data: data,
      options: { }
    };
        if (myChart) {
            myChart.destroy();
        }
       myChart = new Chart(
      document.getElementById('myChart'),
      config
    );
    


}, 2000)
  </script>

</div>

<div>
    <div>
      <h1 class="tama単o">Modo de operacion antiguo</h1>
        <canvas id="myChart1"  width="20" height="5"></canvas>
      </div>
      <script>
        
         fetch('/envio')
    .then(response => response.json())
    .then(json => {
      var old = json.Modoold;
      var Hour = json.currentHour; 
        var labels1 = [Hour
          
        ];
      
        var data1 = {
          labels: labels1,
          datasets: [{
            label: 'Sistema antiguo',
            backgroundColor: 'rgb(255, 99, 132)',
            borderColor: 'rgb(255, 99, 132)',
            data: [old],
          }]
        };
      
        const config1 = {
          type: 'line',
          data: data1,
          options: { }
        };
        const myChart1 = new Chart(
          document.getElementById('myChart1'),
          config1
        );
    });
      </script>
    </div>

    <div>
        <div>
          <h1 class="tama単o">Estado de la Bateria</h1>
            <canvas id="myChart2"  width="20" height="5"></canvas>
          </div>
          <script>
             fetch('/envio')
              .then(response => response.json())
              .then(json => {
              var bat = json.Bateria;
              var Hour = json.currentHour;
              var labels2 = [
              Hour
            ];
          
            var data2 = {
              labels: labels2,
              datasets: [{
                label: 'Bateria',
                backgroundColor: 'rgb(255, 99, 132)',
                borderColor: 'rgb(255, 99, 132)',
                data: [bat],
              }]
            };
          
            const config2 = {
              type: 'line',
              data: data2,
              options: { }
            };
        
            const myChart2 = new Chart(
              document.getElementById('myChart2'),
              config2
            );
          });
          </script>
        </div>

        <div>
            <div>
              <h1 class="tama単o">Estado del voltaje con respecto al viento</h1>
              </div>
              <script>
              var chart = c3.generate({
    data: {
        columns: [
            ['data1', 30, 200, 100, 400, 150, 250],
            ['data2', 50, 20, 10, 40, 15, 25]
        ]
    }
});

setTimeout(function () {
    chart.load({
        columns: [
            ['data1', 230, 190, 300, 500, 300, 400]
        ]
    });
}, 1000);

setTimeout(function () {
    chart.load({
        columns: [
            ['data3', 130, 150, 200, 300, 200, 100]
        ]
    });
}, 1500);

setTimeout(function () {
    chart.unload({
        ids: 'data1'
    });
}, 2000);

            </script>

            </div>
</body>
</html>